<!-- Name: Justin Barlowe
File: create-user.component.html
Description: HTML file for the create user component
Date: 2/17/2024-->

<!-- User Creation Form Start -->
<div
  class="container pt-5 pb-5"
  style="align-items: center; display: flex; justify-content: center"
>
  <div class="col-12 col-md-10 col-lg-8 col-xl-6">
    <div class="card bg-dark text-white" style="border-radius: 1rem">
      <div class="card-body p-5 text-center">
        <div class="mb-md-5 mt-md-4 pb-5">
          <h2 class="fw-bold mb-5 text-uppercase">Register</h2>

          <!-- User Creation Form -->
          <form
            [formGroup]="createUserForm"
            (ngSubmit)="registerUser(createUserForm.value)"
          >
            <div class="form-outline form-white mb-4">
              <input
                formControlName="userName"
                type="text"
                placeholder="Username (required)"
                style="color: white"
                class="form-control form-control-lg"
              />
              <div
                *ngIf="
                  createUserForm.controls['userName'].invalid &&
                  createUserForm.controls['userName'].touched
                "
              >
                <p id="userConfirmation">Username is required</p>
              </div>
            </div>

            <!-- Password input field with form control and validation -->
            <div class="form-outline form-white mb-4">
              <input
                type="password"
                id="password"
                formControlName="password"
                placeholder="Password"
                class="form-control form-control-lg password-input"
              />
              <div
                *ngIf="
                  createUserForm.controls['password'].invalid &&
                  createUserForm.controls['password'].touched
                "
              >
                <p id="userConfirmation">Password is required</p>
              </div>
            </div>

            <!-- Email input field with form control and validation -->
            <div class="form-outline form-white mb-4">
              <input
                formControlName="email"
                type="email"
                placeholder="E-Mail (required)"
                style="color: white"
                class="form-control form-control-lg"
              />
              <div
                *ngIf="
                  createUserForm.controls['email'].invalid &&
                  createUserForm.controls['email'].touched
                "
              >
                <p id="userConfirmation">Email is required</p>
              </div>
            </div>

            <!-- First Name input field with form control -->
            <div class="form-outline form-white mb-4">
              <input
                formControlName="firstName"
                type="text"
                placeholder="First Name"
                style="color: white"
                class="form-control form-control-lg"
              />
            </div>

            <!-- Last Name input field with form control -->
            <div class="form-outline form-white mb-4">
              <input
                formControlName="lastName"
                type="text"
                placeholder="Last Name"
                style="color: white"
                class="form-control form-control-lg"
              />
            </div>

            <!-- Security Questions Input Fields -->

            <p style="font-size: xx-large">Security Questions</p>

            <!-- Security Question 1 -->
            <p>Security Question 1</p>
            <div class="form-outline form-white mb-4">
              <select
                formControlName="securityQuestion1"
                class="form-control form-control-lg custom-select"
              >
                <option value="" disabled selected>
                  Choose your security question...
                </option>
                <ng-container *ngFor="let question of securityQuestions">

                  <!-- Checks if security question has been selected yet and if it has does not show it as an option on the dropdown. -->
                  <option
                    [value]="question"
                    *ngIf="!isQuestionSelected(question, 'securityQuestion1')"
                  >
                    {{ question }}
                  </option>
                </ng-container>
              </select>
              <input
                formControlName="securityAnswer1"
                type="text"
                placeholder="Answer 1 (required)"
                class="form-control form-control-lg"
                style="color: white"
              />
            </div>

            <!-- Security Question 2 -->
            <p>Security Question 2</p>
            <div class="form-outline form-white mb-4">
              <select
                formControlName="securityQuestion2"
                class="form-control form-control-lg custom-select"
              >
                <option value="" disabled selected>
                  Choose your security question...
                </option>
                <ng-container *ngFor="let question of securityQuestions">

                  <!-- Checks if security question has been selected yet and if it has does not show it as an option on the dropdown. -->
                  <option
                    [value]="question"
                    *ngIf="!isQuestionSelected(question, 'securityQuestion2')"
                  >
                    {{ question }}
                  </option>
                </ng-container>
              </select>
              <input
                formControlName="securityAnswer2"
                type="text"
                placeholder="Answer 2 (required)"
                class="form-control form-control-lg"
                style="color: white"
              />
            </div>

            <!-- Security Question 3 -->
            <p>Security Question 3</p>
            <div class="form-outline form-white mb-4">
              <select
                formControlName="securityQuestion3"
                class="form-control form-control-lg custom-select"
              >
                <option value="" disabled selected>
                  Choose your security question...
                </option>
                <ng-container *ngFor="let question of securityQuestions">

                  <!-- Checks if security question has been selected yet and if it has does not show it as an option on the dropdown. -->
                  <option
                    [value]="question"
                    *ngIf="!isQuestionSelected(question, 'securityQuestion3')"
                  >
                    {{ question }}
                  </option>
                </ng-container>
              </select>
              <input
                formControlName="securityAnswer3"
                type="text"
                placeholder="Answer 3 (required)"
                class="form-control form-control-lg"
                style="color: white"
              />
            </div>

            <br />
            <br />

            <!-- Create User Button -->
            <button class="btn btn-lg px-5" type="submit">Create User</button>
          </form>
          <br />
          <br />

          <!-- User Message area -->
          <p id="userConfirmation">{{ message }}</p>
        </div>
      </div>
    </div>
  </div>
</div>
